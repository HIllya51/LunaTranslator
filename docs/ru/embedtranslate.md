## Как использовать встроенный перевод?

> Во-первых, не все игры поддерживают встроенный перевод. Во-вторых, встроенный перевод может привести к сбою игры.

<details>
  <summary>Если в окне выбора текста нет строки "Встроенный", значит, встроенный перевод не поддерживается</summary>
  <img src="https://image.lunatranslator.org/zh/embed/noembed.png">
  <img src="https://image.lunatranslator.org/zh/embed/someembed.png">
</details>

Для игр, поддерживающих встроенный перевод, выберите элемент текста, поддерживающий встроенный перевод, и активируйте его.

![img](https://image.lunatranslator.org/zh/embed/select.png)

Для элементов, поддерживающих встроенный перевод, **отображение** и **встроенный** могут быть активированы одновременно или нет. Когда они активированы одновременно, перевод будет встроен в игру и отображаться в окне программы; если активирован только встроенный, перевод будет отображаться только в игре, а в окне программы ничего не будет отображаться.

Когда начинается встроенный перевод, часто возникает проблема с глифами. Обычно это связано с проблемами **набора символов** и **шрифта**. Для английских игр это обычно связано с отсутствием китайского **шрифта** в игре, например:

![img](https://image.lunatranslator.org/zh/embed/luanma.png)

В этом случае вам нужно активировать **изменение шрифта игры** в **настройках встроенного перевода** и выбрать подходящий шрифт для отображения китайских символов.

![img](https://image.lunatranslator.org/zh/embed/ziti.png)

После изменения шрифта китайские символы могут отображаться правильно:

![img](https://image.lunatranslator.org/zh/embed/okembed.png)

Но вы заметите, что встроенный текст написан на традиционном китайском. Вы можете отключить **преобразование китайских символов в традиционные/японские иероглифы** в **настройках встроенного перевода**.

> Это связано с тем, что **многие старые японские галгеи используют собственный набор символов shift-jis, который не может правильно обрабатывать китайские символы. Преобразование китайских иероглифов в похожие традиционные/японские иероглифы может уменьшить количество глифов. Поэтому по умолчанию упрощенные китайские символы автоматически преобразуются в традиционные китайские**. Если после отключения этой настройки возникнут глифы, восстановите эту настройку.
Для некоторых новых игровых движков и большинства английских игр обычно используются наборы символов Unicode, такие как utf-8 или utf-16 (например, **KiriKiri**, **Renpy**, **TyranoScript**, **RPGMakerMV** и т.д.). Даже если возникнут глифы, обычно это проблема шрифта, а не набора символов.

![img](https://image.lunatranslator.org/zh/embed/fanti.png)

После отключения этой настройки можно отображать упрощенные китайские символы нормально. Но для некоторых игр, которые не могут отображать упрощенные китайские символы нормально, можно попробовать активировать эту опцию, чтобы увидеть, можно ли отображать их нормально.

![img](https://image.lunatranslator.org/zh/embed/good.png)

** **

## Некоторые другие настройки

**1. Сохранить оригинальный текст** 

![img](https://image.lunatranslator.org/zh/embed/keeporigin.png)

Из-за ограничений игры по количеству строк текста, по умолчанию не добавляется разрыв строки между переводом и оригинальным текстом. Если вы уверены, что можете вместить, можно добавить разрыв строки перед переводом с помощью регулярного выражения в **оптимизации перевода** -> **исправление результата перевода**.

![img](https://image.lunatranslator.org/zh/embed/addspace.png)

**2. Время ожидания перевода**

Принцип встроенного перевода заключается в том, чтобы остановить игру перед отображением текста в определенной функции, отправить текст в переводчик, дождаться перевода, изменить текст в памяти на переведенный текст, а затем продолжить выполнение игры для отображения перевода. Поэтому **при использовании медленного переводчика игра обязательно зависнет**. Вы можете ограничить время ожидания, чтобы избежать длительных зависаний из-за медленного перевода.

**3. Использование указанного переводчика**

При активации нескольких источников перевода можно выбрать встроенный перевод с лучшим эффектом. Если не активировать, или если указанный переводчик не активирован, будет использоваться самый быстрый перевод, чтобы уменьшить задержку в игре.


**4. Преобразовать китайские символы в традиционные/японские иероглифы**

Пропущено

**5. Вставить пробелы между перекрывающимися символами**

Для некоторых старых японских игровых движков, таких как SiglusEngine, неправильно обрабатывается ширина китайских символов, и они отображаются с шириной английских символов, что приводит к перекрытию символов во встроенном китайском тексте. Можно попробовать настроить эту опцию, чтобы решить эту проблему.

**6. Ограничить количество символов в строке**

Иногда в некоторых играх количество символов в строке ограничено, и содержимое, превышающее длину, будет отображаться за пределами правой части текстового поля и не будет отображаться. Эту проблему можно решить, вручную разбив строки с помощью этой настройки.

![img](https://image.lunatranslator.org/zh/embed/limitlength.png)

**7. Изменить шрифт игры**

Пропущено

**8. Проверка безопасности встроенного перевода**

Для игр, таких как Renpy, извлеченный текст часто включает символы `{` `}` `[` `]` и другие элементы синтаксиса. Если переводчик неправильно обрабатывает эти элементы и разрушает синтаксис, это может привести к сбою игры. Поэтому программа по умолчанию пропускает перевод некоторых комбинаций символов, которые могут привести к сбою игры, с помощью регулярных выражений. Если вы не боитесь сбоя игры, можете отключить эту настройку или вручную заменить некоторые более детализированные регулярные выражения, чтобы уменьшить ненужный пропуск.

![img](https://image.lunatranslator.org/zh/embed/safeskip.png)