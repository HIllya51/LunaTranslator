## 埋め込み翻訳の使い方

> まず、すべてのゲームが埋め込みをサポートしているわけではありません。次に、埋め込みが原因でゲームがクラッシュする可能性があります。

<details>
  <summary>テキスト選択に「埋め込み」行がない場合、埋め込みがサポートされていないことを意味します。</summary>
  <img src="https://image.lunatranslator.org/zh/embed/noembed.png"> 
  <img src="https://image.lunatranslator.org/zh/embed/someembed.png"> 
</details>

埋め込みをサポートしているゲームの場合、埋め込みをサポートしているテキストエントリを選択してアクティブにします。

![img](https://image.lunatranslator.org/zh/embed/select.png) 

埋め込みをサポートしているエントリについては、**表示**と**埋め込み**の両方をアクティブにするかどうかを自由に選択できます。両方がアクティブな場合、翻訳はゲームに埋め込まれ、ソフトウェアウィンドウにさらに多くの翻訳が表示されます。埋め込みのみがアクティブな場合、埋め込まれた翻訳のみがゲームに表示され、ソフトウェアウィンドウには何も表示されません。

埋め込み翻訳を開始すると、しばしば文字化けが発生します。ゲームの文字化けは通常、**文字セット**と**フォント**が原因です。英語のゲームの場合、通常は中国語の**フォント**が不足しているために発生します。例えば：

![img](https://image.lunatranslator.org/zh/embed/luanma.png) 

この場合、**ゲームフォントの変更**をアクティブにして、中国語の文字を表示するための適切なフォントを選択する必要があります。

![img](https://image.lunatranslator.org/zh/embed/ziti.png) 

フォントを変更すると、中国語の文字が正しく表示されます：

![img](https://image.lunatranslator.org/zh/embed/okembed.png) 

多くの古い日本のギャルゲームでは、内蔵のシフトJIS文字セットを使用して中国語の文字を正しく処理します。**中国語の文字を繁体字/日本語の文字に変換**して、文字化けの発生を減らすことができます。

新しいゲームエンジンやほとんどの英語のゲームでは、通常、utf-8やutf-16などのUnicode文字セットが使用されます（**KiriKiri**、**Renpy**、**TyranoScript**、**RPGMakerMV**など）。文字化けが発生しても、通常はフォントの問題であり、文字セットの問題ではありません。

![img](https://image.lunatranslator.org/zh/embed/fanti.png) 

この設定をオフにすると、簡体字中国語が正しく表示されます。ただし、簡体字中国語が正しく表示されないゲームの場合、このオプションをアクティブにして正常に表示されるかどうかを確認できます。

![img](https://image.lunatranslator.org/zh/embed/good.png) 

## その他の設定

1. #### 原文を保持

  ![img](https://image.lunatranslator.org/zh/embed/keeporigin.png) 

  ゲームが表示できるテキスト行数の制限のため、デフォルトでは翻訳と原文の間に改行が追加されません。収容できることが確実な場合、**翻訳最適化** -> **翻訳結果修正**で正規表現を追加して、翻訳の前に改行を追加できます。

  ![img](https://image.lunatranslator.org/zh/embed/addspace.png) 

1. #### 翻訳待機時間

  埋め込み翻訳の原理は、ゲームがテキストを表示する前に特定の関数でゲームを一時停止し、表示するテキストを翻訳者に送信し、翻訳を待ってから翻訳されたテキストでテキストメモリを変更し、ゲームを続行して翻訳を表示することです。したがって、**遅い翻訳を使用すると、ゲームがスタッターすることは避けられません**。待機時間を制限することで、遅い翻訳による長時間のスタッターを回避できます。

1. #### 指定翻訳者を使用

  複数の翻訳ソースがアクティブな場合、最も効果的な指定翻訳を埋め込むことができます。アクティブでない場合、または指定翻訳者がアクティブでない場合、ゲームの遅延を減らすために最速の翻訳が使用されます。

1. #### 文字を繁体字/日本語の文字に変換

  省略

1. #### 行ごとの文字数を制限

  一部のゲームでは、1行あたりの文字数が制限されており、長さを超える内容はテキストボックスの右側に表示され、表示できません。この設定を使用して手動で改行することで、この状況を回避できます。

  ![img](https://image.lunatranslator.org/zh/embed/limitlength.png) 

1. #### ゲームフォントの変更

  省略

1. #### 埋め込みの安全性チェック

  Renpyなどのゲームでは、抽出されたテキストに`{` `}` `[` `]`などの構文要素の文字が含まれることがよくあります。翻訳ソースがこれらの内容を正しく処理しない場合、構文が壊れてゲームがクラッシュする可能性があります。したがって、ソフトウェアはデフォルトで正規表現マッチングを使用して、ゲームを引き起こす可能性のある特定の文字の組み合わせの翻訳を**スキップ**します。ゲームのクラッシュを心配しない場合、この設定をキャンセルするか、手動でより細かい正規表現マッチングを置き換えて不要なスキップを減らすことができます。

  ![img](https://image.lunatranslator.org/zh/embed/safeskip.png)
