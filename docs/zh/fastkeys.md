# 快捷按键

::: tip
若要使用快捷键，首先需要激活`是否使用快捷键`，然后激活要使用的某个快捷键，并设置其按键
:::

::: tabs

== 通用

1. #### 手动翻译
    从当前的文本输入源，读取一次输入，并执行翻译。
    例如如果当前是OCR模式，会再执行一次OCR。

1. #### 自动翻译
    暂停/继续自动从当前的文本输入源读取文本。
    例如如果当前是HOOK模式，会暂停读取游戏文本；当前是OCR模式，暂停自动识别图像；如果当前是剪贴板模式，会暂停自动读取剪贴板。

1. #### 打开设置
    略

1. #### 显示/隐藏原文
    切换是否显示原文，会立即生效。

1. #### 显示/隐藏翻译
    切换是否使用翻译，系翻译的总开关，关闭后将不会进行任何翻译。

    如果已经进行过了翻译，则关闭后将会隐藏翻译结果，并再重新打开时重新显示本次的翻译结果。

    如果未进行过翻译，并从隐藏切换到显示，则会触发对当前句子的翻译。
    
1. #### 显示/隐藏历史文本
    打开或关闭历史文本的窗口。

1. #### 鼠标穿透窗口
    切换鼠标穿透窗口状态。
    该功能必须配合鼠标穿透窗口工具按钮才能正确使用。

1. #### 锁定工具栏
    未锁定工具栏时，当鼠标移出时，工具栏会自动隐藏；激活后工具栏将始终显示。

    未锁定工具栏时，如果激活了`鼠标穿透窗口`，则仅当鼠标移动到**鼠标穿透窗口按钮及其左右一个按钮的区域**时，工具栏才显示；否则只要鼠标进入到翻译窗口，工具就会显示。

    如果当前使用了窗口特效(Aero/Arylic)，且不锁定工具栏，则工具栏会处于文本区的z轴之上的区域，而非处于文本区的y轴上面。这是因为由于Windows的原因，使用窗口特效时，如果将工具栏只是隐藏而非将缩去其窗口高度，则被隐藏的工具栏仍会被渲染亚力克/Aero背景，导致工具栏所在区域会有一块空白。

1. #### 取词翻译
    对当前鼠标选取到的文本进行翻译

    优先使用UIAutomation进行取词。如果当前窗口的焦点控件不支持UIAutomationTextPattern导致取词失败，则读取剪贴板。
1. #### 显示/隐藏翻译窗口
    略

1. #### 退出
    略

== HOOK

>[!WARNING]
>仅在HOOK模式下可用

1. #### 选择游戏
    弹出选择游戏进程窗口，来选择要HOOK的游戏进程。
1. #### 选择文本
    弹出选择游戏文本窗口，来选择要翻译哪条HOOK到的文本。

    不过，选择文本窗口在选择进程后会自动弹出，实际上是用来更换选择的文本，或修改一些设置用的。

== OCR


1. #### 选取OCR范围
    **仅在OCR模式下可用**

    OCR模式下，选取OCR区域，或者更换OCR区域，或者当激活`OCR设置`->`其他`->`多重区域模式`时增加新的OCR区域

1. #### 显示/隐藏范围框 
    **仅在OCR模式下可用**

    当未选择任何OCR范围时，使用该快捷键显示OCR范围，会自动设置OCR范围为上一次选择的OCR。

1. #### 清除OCR范围
    **仅在OCR模式下可用**

    清除所有已选取范围

1. #### 进行一次OCR
    和`读取剪贴板`类似，不管当前的默认文本输入源是什么，都会先进行OCR范围选择，然后进行一次OCR，然后进行翻译流程。

    一般用于，在HOOK模式下，遇到选择支时，临时使用一次OCR进行翻译选择支。或者在OCR模式下，临时去识别一次其他偶尔出现的新的位置。


1. #### 再次进行OCR
    当使用过一次`进行一次OCR`后，使用这个快捷键，可以在原来的位置上再次进行一次OCR而无需重新选择识别区域。

== 剪贴板

1. #### 读取剪贴板
    这个的实际意义是，不管当前的默认文本输入源是什么，都从剪贴板读取一次文本，并传给之后的翻译/tts/...流程

1. #### 复制到剪贴板
    复制当前提取到的文本到剪贴板一次。如果想要自动提取到剪贴板，应当激活`文本输入`->`文本输出`->`剪贴板`->`自动输出`。

1. #### 复制到剪贴板 翻译
    复制翻译而非原文到剪贴板

== TTS

1. #### 自动朗读
    切换是否自动朗读

1. #### 朗读
    对当前文本进行语音合成。

    该朗读会无视`跳过`（如果在`语音指定`中，匹配当前文本目标为`跳过`，则使用快捷键进行朗读时，会无视跳过，强制进行朗读）
    
1. #### 朗读 中断
    中断朗读。

== 游戏

1. #### 绑定窗口（点击自己取消）
    在绑定了游戏窗口后，`窗口缩放` `窗口截图` `游戏静音`，`跟随游戏窗口`->`游戏失去焦点时取消置顶`和`游戏窗口移动时同步移动`，以及记录游戏时间等，才可用。
    不论HOOK/OCR/剪贴板模式，该快捷键都可用。

    在HOOK模式下，会自动根据连接的游戏，自动绑定游戏窗口。但也可以在用该快捷键重新选择其他窗口。

    在OCR模式下，绑定窗口后，还额外允许游戏窗口移动时，同步自动移动OCR区域和范围框。
    在OCR/剪贴板模型下，绑定窗口后，也可以和HOOK模式下一样，关联到当前游戏到游戏设置，从而使用当前游戏的专有翻译优化词典等。

1. #### 窗口截图
    可以对绑定的窗口进行截图，（默认会截两张图，GDI和Winrt，两者均有一定概率会失败）。最好的地方是，如果当前正在使用Magpie进行缩放，还会对放大的窗口进行截图。

1. #### 游戏静音
    当绑定游戏窗口后（不只是hook模式，ocr或剪贴板模式都可以，只要绑定了游戏窗口），可以一键对游戏进行静音，省去了在系统音量合成器进行游戏静音的麻烦。

1. #### Magpie 缩放
    可以一键对游戏窗口使用内置的Magpie进行全屏缩放

1. #### Magpie 窗口化缩放
    可以一键对游戏窗口使用内置的Magpie进行窗口化缩放
    
== 查词

1. #### 取词查词
    对当前鼠标选取到的文本进行查词

    优先使用UIAutomation进行取词。如果当前窗口的焦点控件不支持UIAutomationTextPattern导致取词失败，则读取剪贴板。
1. #### 取词查词-在新窗口中
    对当前鼠标选取到的文本在新建的查词窗口中查词，以避免覆盖正在进行的查词

    优先使用UIAutomation进行取词。如果当前窗口的焦点控件不支持UIAutomationTextPattern导致取词失败，则读取剪贴板。
1. #### OCR 查词
    选取OCR范围进行一次OCR然后查词

1. #### Anki 录音
    查词窗口中的Anki添加界面中的录音功能的快捷键

1. #### Anki 录音 例句
    查词窗口中的Anki添加界面中的录音功能的快捷键，但这个快捷键录制的音频将设置给例句字段

1. #### Anki 添加
    添加单词到Anki

1. #### 朗读 单词
    朗读当前查词窗口的单词
    
== 自定义

可以添加更多任意的快捷键，只需自己实现`OnHotKeyClicked`函数，会在快捷键触发时被调用。

:::